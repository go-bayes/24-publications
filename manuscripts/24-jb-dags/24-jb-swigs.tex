% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  single column]{article}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage[]{libertinus}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[top=30mm,left=25mm,heightrounded,headsep=22pt,headheight=11pt,footskip=33pt,ignorehead,ignorefoot]{geometry}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother


\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
% definitions for citeproc citations
\NewDocumentCommand\citeproctext{}{}
\NewDocumentCommand\citeproc{mm}{%
  \begingroup\def\citeproctext{#2}\cite{#1}\endgroup}
\makeatletter
 % allow citations to break across lines
 \let\@cite@ofmt\@firstofone
 % avoid brackets around text for \cite:
 \def\@biblabel#1{}
 \def\@cite#1#2{{#1\if@tempswa , #2\fi}}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-indent, #2 entry-spacing
 {\begin{list}{}{%
  \setlength{\itemindent}{0pt}
  \setlength{\leftmargin}{0pt}
  \setlength{\parsep}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
   \setlength{\leftmargin}{\cslhangindent}
   \setlength{\itemindent}{-1\cslhangindent}
  \fi
  % set entry spacing
  \setlength{\itemsep}{#2\baselineskip}}}
 {\end{list}}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{\hfill\break\parbox[t]{\linewidth}{\strut\ignorespaces#1\strut}}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\input{/Users/joseph/GIT/latex/latex-for-quarto.tex}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Causal Interaction, Causal Mediation, and Sustained Treatment Strategies Clarified Through Single World Intervention Graphs},
  pdfauthor={Joseph A. Bulbulia},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{Causal Interaction, Causal Mediation, and Sustained Treatment
Strategies Clarified Through Single World Intervention Graphs}

\usepackage{academicons}
\usepackage{xcolor}

  \author{Joseph A. Bulbulia}
            \affil{%
             \small{     Victoria University of Wellington, New Zealand
          ORCID \textcolor[HTML]{A6CE39}{\aiOrcid} ~0000-0002-5861-2056 }
              }
      


\date{2024-05-18}
\begin{document}
\maketitle
\begin{abstract}
Despite several decades of progress in the causal data sciences,
concepts such as interaction, mediation, and longitudinal modelling
remain poorly understood. Here we use causal diagrams to clarify these
fundamental concepts.

\textbf{KEYWORDS}: \emph{Causal Inference}; \emph{SWIGs}; \emph{DAGs};*
\emph{Evolution}; \emph{Mediation}; \emph{Longitudinal Growth};
\emph{Time-varying Treatments};
\end{abstract}

\subsection{Introduction}\label{introduction}

Human scientists apply statistical models to data and report
`interaction', `moderation', `mediation' using both cross-sectional and
time-series data. What do these concepts mean? It is generally unclear.
The confidence with which investigators deploy methods and report their
findings does not make these concepts any clearer.

Here we describe when and how these concepts may be used for causal
inferences.

We begin by clarifing basic concepts and graphical conventions.

\subsubsection{Terminology}\label{terminology}

\textbf{Causality}: A cause, \(A\), is said to effect an outcome \(Y\),
if in setting the cause to one level, \(A_i = a^*\), as opposed to
another level \(A_i = a\) the outcome would be different, which we
write: \(Y_i(a^*) -  Y_i(a) \neq 0\). This quantity denotes the contrast
for individual \(i\), measured on the difference scale, between
measurable outcomes under two states of the world, one in which
\(A = a^*\) the other when \(A=a\). We call variable of interest, the
cause -- \(A\) -- a `treatment' or an `exposure'; we call the outcome
under treatment -- \(Y(A = a)\) -- the potential or counterfactual
outcome. We use the terms ``potential outcome'' and ``counterfactual
outcome'' interchangeably. The observed outcome is given \(Y|A=a\). At
the individual level, we may generally only observe at most
\(Y_i|A_i =a\) or \(Y_i|A_i =a^*\) but not both.

\textbf{Causal Inference} Although physics prevents us from observing
individual causal effects, we may compute average treatment effects by
aggregating over individual observations by treatment conditions. For a
binary treamtment we write as the difference in mean outcomes by
treatment condition: \(E[Y(1)] - E[Y(0)]\) or equivalently as the mean
difference in outcomes by treatment condition \(E[Y(1) - Y(0)]\).
Notably, this countefactual contrast is precisely the quantity (on the
difference scale) that we obtain for a sample population from an ideally
conducted randomised controlled trials -- an `experiment.' Implied by
the ideal experiment are the following assumptions:

\begin{enumerate}
\def\labelenumi{(\arabic{enumi})}
\tightlist
\item
  causal consistency: that treatment levels are consistent within the
  treatment arms to be compared (implied by ``control'');
\item
  exchangeablity: that there is balance across all arms in the
  co-variates that might affect outcomes under treatment (implied by
  `randomisation');
\item
  for each co-variate that might affect treatment in the target
  population, there is a non-zero probability this co-variate will be
  observed within each treatment condition to be compared (implied by
  the combination of randomisation and a clearly defined target
  population.)
\end{enumerate}

Of course, the experiments investigators conduct are often not ideal,
any combination of these assumptions may fail. In observational or
``real-world'' settings, none of these assumptions are guaranteed.
Worse, only positivity may be evaluated from the data. If ou interested
is in using real-world data to understand the causal effects of
interventions we must

Step 1. State a well-defined intervention.

Step 2. State a well-defined outcome.

Step 3. Clarify the target population.

Step 4. Evaluate whether the treatments to be compared satisfy causal
consistency.

Step 5. Evaluate whether, conditional on measured covariates, the
treatment groups to be compared are exchangeable, or equivalently that
any differences are ignorable, or equivalently, that there confounding
covariates across treatment levels are balanced, or equivalently, all
backdoor paths between treatments and outcomes have been closed, or
equivalently, treatment(s) and outcome(s) are d-separated, or
equivalently there is no unmeasured confounding. Although terminology
varies, the target remains the same, to ensure non-random ``real-world''
data may be modelled to emulate a randomised controlled experiment.

Step 6. Evaluate whether the positivity assumption is satisfied.

Step 7. Transparently communicate investigator reasoning and decisions
for steps 1-6.

\textbf{Confounding}: treatment and outcome are associated independently
of causality.

\subsubsection{Meaning of Symbols}\label{meaning-of-symbols}

To clarify the concepts of interaction, moderation, and mediation, we
will use causal graphical methods. For a review of causal directed
acyclic graphs (\citeproc{ref-pearl}{\textbf{pearl?}}); McElreath
(\citeproc{ref-mcelreath2020}{2020}); Neal
(\citeproc{ref-neal2020introduction}{2020}); Hernan and Robins
(\citeproc{ref-hernan2024WHATIF}{2024}). For a review of single world
intervention graphs see Richardson and Robins
(\citeproc{ref-richardson2013swigsprimer}{2013a}). I will assume some
familarity with causal DAGs when introducing single world interventiong
graphs.

\textbf{\(A\)}: Denotes the ``treatment'' or ``exposure'' - a random
variable. This is the variable for which we seek to understand the
effect of intervening on it. It is the ``cause.''

\textbf{\(\bar{A}\)}: Denotes a sequence of treatments.

\textbf{\(Y\)}: Denotes the outcome or response, measured at the end of
study -- the ``effect.''

\textbf{\(L\)}: Denotes a measured confounder or set of confounders --
variables required for conditional exchangeability.

\textbf{\(U\)}: Denotes an unmeasured confounder or confounders.

\textbf{\(\mathcal{R}\)}: Denotes chance assignment to treatment
condition, as when treatment assignment is randomised.

\textbf{\(\mathcal{G}\)}: Denotes a graph, here, a causal directed
acyclic graph.

Table~\ref{tbl-terminologylocalconventions} reports our graphical
conventions.

\newpage{}

\begin{table}

\caption{\label{tbl-terminologylocalconventions}Terminology}

\centering{

\terminologylocalconventions

}

\end{table}%

\subsubsection{Elements of causal
graphs}\label{elements-of-causal-graphs}

\textbf{Node}: a node or vertex represents characteristics or features
of units within a population on a causal diagram -- that is a
``variable.'' In causal directed acyclic graphs, we draw nodes with
respect to the \emph{target population}, which is the population for
whom investigators seek causal inferences
(\citeproc{ref-suzuki2020}{Suzuki \emph{et al.} 2020}). Time-indexed
node: \(X_t\) denotes relative chronology

\textbf{Edge without an Arrow} (\(\association\)): path of association,
we do not assert causality.

\textbf{Arrow} (\(\rightarrowNEW\)): denotes causal relationship from
the node at the base of the arrow (a `parent') to the node at the tip of
the arrow (a `child'). In causal DAGS it is conventional to refrain from
drawing an arrow from treatment to outcome to avoid asserting a causal
path from \(A\) to \(Y\) because iyr purpose is to ascertain whether
causality can be identified for this path. All other nodes and paths --
including the absence of nodes and paths -- is typically assumed.

\textbf{Red Arrow} (\(\rightarrowred\)): path of non-causal association
between the treatment and outcome. Despite the arrows, this path is
associational and may flow against time.

\textbf{Dashed Arrow} (\(\rightarrowdotted\)): denotes a true
association between the treatment and outcome that becomes partially
obscured when conditioning on a mediator, assuming \(A\) causes \(Y\).

\textbf{Dashed Red Arrow} (\(\rightarrowdottedred\)): highlights
over-conditioning bias from conditioning on a mediator.

\textbf{Open Blue Arrow} (\(\rightarrowblue\)): highlights effect
modification, which occurs when the levels of the effect of treatment
vary within levels of a covariate. We do not assess the causal effect of
the effect-modifier on the outcome, recognising that it may be
incoherent to consider intervening on the effect-modifier.

\textbf{Boxed Variable} \(\boxed{X}\): conditioning or adjustment for
\(X\).

\textbf{Red-Boxed Variable} \(\boxedred{X}\): highlights the source of
confounding bias from adjustment.

\textbf{Dashed Circle} \(\circledotted{X}\): no adjustment is made for a
variable (implied for unmeasured confounders.)

\textbf{\(\big(\mathcal{R} \rightarrow A\big)\)}: randomisation into the
treatment condition.

\textbf{Node Splitting} \(\switbasic\) used in Single World Intervention
Graphs to denote counterfactual histories that arise following
interventions. Node-splitting allows investigators to separately
evaluate identification for each counterfactual to be contrasted. All
causal DAGs can be restated using Single World Intervention Graphs.
However, each Single World Intervention Graph may encode at most one
level of treatment or one sequence of treatments. To avoid proliferating
graphs, we may use a Single World Intervention Template to denote the
graph-valued function from which multiple Single World Intervention
Graphs may be generated.

\textbf{Green dashed arrow}: \(\rightarrowdottedgreen\): Indicates
dependency in dynamic sequentiental treatment strategies where the
`natural value' a treatment value under a specific treatment regime
depends on the values obtained from the counterfactual histories that
precede the node in Single World Intervention Graph. Dynamic Strategies
enable flexible, realistic causal inferences, however, they also impose
stronger identification assumtions. For example, arrows to the ``natural
value'' of the treatment may compromise sequential exchangeabilty,
threatening identification (refer to Richardson and Robins
(\citeproc{ref-richardson2013}{2013b})).

Table~\ref{tbl-terminologylocalconventions} reports our graphical
conventions.

\newpage{}

\begin{table}

\caption{\label{tbl-terminologygeneral}Elements of Causal Graphs}

\centering{

\terminologygeneral

}

\end{table}%

\newpage{}

\subsection{Part 1 Interaction}\label{part-1-interaction}

In causal data science, we may think of interaction or moderation in one
of two ways, either as

\begin{enumerate}
\def\labelenumi{(\arabic{enumi})}
\tightlist
\item
  Interaction as effect-modification of a single intervention. We might
  be interested in heterogeneity in the magnitude of a single
  intervention with a stratum or strata of the population. For example,
  we might ask, does the effect of religious service attendance affect
  charitable giving among differently among people who were born in
  Australia differently from its effects on people who were born in
  Egypt?
\end{enumerate}

Here, we do not imagine any intervention on birthplace.

\begin{enumerate}
\def\labelenumi{(\arabic{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Interaction as the combined effect of a double intervention. We might
  ask of whether administering two treatments would affect people
  differently than each taken individually. For exampel, we might ask
  wehther the combined effect of religious service and wealth affect
  charitable giving differently from the independent effect of either
  religious service or of wealth taken alone.
\end{enumerate}

Whether considering interaction as effect modification or as a double
intervention, we must state a scale at which we indent to measure our
contrasts. This is because evidence of effect-modification or
interaction that is present at one scale may not be present at another.
Here, we will restrict our examples to causal contrasts on the additive
scale.

The key point here is that before writing applying statistical models to
data, we

Table~\ref{tbl-terminologyeffectmodification} reviews our graphical
conventions for describing effect modification.

\begin{table}

\caption{\label{tbl-terminologyeffectmodification}}

\centering{

\captionsetup{labelsep=none}

\terminologyeffectmodification

}

\end{table}%

Table~\ref{tbl-terminologyeffectmodificationtypes} illustrates the
dependency of effect modification on other variables included in a model

\begin{table}

\caption{\label{tbl-terminologyeffectmodificationtypes}Effect
Modification}

\centering{

\terminologyeffectmodificationtypes

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-swigtable}Assumptions of Causal Mediation}

\centering{

\swigtable

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-interactionpuzzle}Causal Interaction}

\centering{

\interactionpuzzle

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-medationpuzzle}Causal Mediation}

\centering{

\mediationpuzzle

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-medationassumptions}Assumptions of Causal Mediation}

\centering{

\mediationassumptionsswig

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-pearltable}Assumptions of Causal Mediation}

\centering{

\pearltable

}

\end{table}%

\newpage{}

\begin{table}

\caption{\label{tbl-swigtabledeveloped}Assumptions of Causal Mediation}

\centering{

\swigtabledeveloped

}

\end{table}%

\subsection{Conclusions}\label{conclusions}

\subsection{Funding}\label{funding}

This work is supported by a grant from the Templeton Religion Trust
(TRT0418) and RSNZ Marsden 3721245, 20-UOA-123; RSNZ 19-UOO-090. I also
received support from the Max Planck Institute for the Science of Human
History. The Funders had no role in preparing the manuscript or the
decision to publish it.

\subsection{Acknowledgements}\label{acknowledgements}

Errors are my own.

\subsection{Appendix A: Glossary}\label{appendix-a-glossary}

\begin{table}

\caption{\label{tbl-gloassary}Glossary}

\centering{

\glossaryTerms

}

\end{table}%

\phantomsection\label{refs}
\begin{CSLReferences}{1}{0}
\bibitem[\citeproctext]{ref-hernan2024WHATIF}
Hernan, MA, and Robins, JM (2024) \emph{Causal inference: What if?},
Taylor \& Francis. Retrieved from
\url{https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/}

\bibitem[\citeproctext]{ref-mcelreath2020}
McElreath, R (2020) \emph{Statistical rethinking: A {B}ayesian course
with examples in r and stan}, CRC press.

\bibitem[\citeproctext]{ref-neal2020introduction}
Neal, B (2020) Introduction to causal inference from a machine learning
perspective. \emph{Course Lecture Notes (Draft)}. Retrieved from
\url{https://www.bradyneal.com/Introduction_to_Causal_Inference-Dec17_2020-Neal.pdf}

\bibitem[\citeproctext]{ref-richardson2013}
Richardson, TS, and Robins, JM (2013b) Single world intervention graphs:
A primer. In, Citeseer.

\bibitem[\citeproctext]{ref-richardson2013swigsprimer}
Richardson, TS, and Robins, JM (2013a) Single world intervention graphs:
A primer. In \emph{Second UAI workshop on causal structure learning,
{B}ellevue, {W}ashington}, Citeseer. Retrieved from
\url{https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=07bbcb458109d2663acc0d098e8913892389a2a7}

\bibitem[\citeproctext]{ref-suzuki2020}
Suzuki, E, Shinozaki, T, and Yamamoto, E (2020) Causal Diagrams:
Pitfalls and Tips. \emph{Journal of Epidemiology}, \textbf{30}(4),
153--162.
doi:\href{https://doi.org/10.2188/jea.JE20190192}{10.2188/jea.JE20190192}.

\end{CSLReferences}



\end{document}
